<div class="container">
<strong><span><%= @comment.karma %></span> | <%= @comment.author_username %></strong>
<p><%= @comment.content %></p>
<small><%= @comment.readable_timestamp(@comment.created_at) %></small>
<small><%= link_to "Upvote", upvote_comment_url(@comment) %> | <span><%= link_to "Downvote", downvote_comment_url(@comment) %></span></small>
</div>
<div class="container">

  <%= form_for :reply, method: 'post', url: comments_url do |f| %>
  
    <div class="form-group">
      <%= f.text_area :content, class: 'form-control' %>
    </div>

    <input type="hidden" name="reply[post_id]" value="<%= @post.id %>">
    <input type="hidden" name="reply[parent_comment_id]" value="<%= @comment.id %>">

    <div class="form-group">
      <%= f.submit "Reply", class: 'btn btn-primary' %>
    </div>

  <% end %>
</div>

<div class="container">
  <ul class="list-group">
    <% @comments_by_parent[@comment.id].select { |c| c.parent_comment_id === @comment.id }.each do |child_comment| %>
      <li class="list-group-item">
        <%= render("comments/comment", comment: child_comment, comments_by_parent: @comments_by_parent) %>
      </li>
    <% end %>
  </ul>
</div>